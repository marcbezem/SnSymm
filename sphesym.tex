\documentclass[english,a4]{article}

%\usepackage{fontspec}
\usepackage{amsmath,amsthm,amssymb}
%\usepackage{unicode-math}
%\usepackage{polyglossia}
\usepackage{enumitem}
\usepackage{tikz,tikz-cd}
\usepackage{hyperref}
\usepackage{microtype}
%\usepackage[explicit]{titlesec}
\usepackage[mathscr]{euscript}
\usepackage{mathtools}

\input macros%
\input macros2%

\hypersetup{
    colorlinks,
    linkcolor={red!50!black},
    citecolor={blue!50!black},
    urlcolor={blue!80!black}
}

\setlist[enumerate]{label=(\roman*)}

\title{{On Symmetries of Spheres in HoTT-UF}}%
\author{\normalsize XYZ} %
\date{\normalsize Last updated on \today}%

%% global tikz styles
\tikzset{cell/.style={%
    shorten <=1em,%
    shorten >=1em,
    /tikz/commutative diagrams/Rightarrow
  }%
}%

\def\U{\universe U}%

\begin{document}

\maketitle

\begin{abstract}
  We first prove in HoTT-UF that
  \begin{displaymath}
    (\Sc = \Sc) \weq (\Sc + \Sc).
  \end{displaymath}
This result doesn't generalise to higher dimensions.
However, one can prove that $S^n = S^n$ is equivalent the sum of two
connected components, since the set truncation of $S^n = S^n$ is $\bool$. 
One component contains, of course, $\refl{S^n}$.
The other component contains ...
Moreover, these two components are equivalent.
\end{abstract}


\section{The circle}
In this document, we shall establish an equivalence
between the type of equalities of $\Sc$ with itself and the sum type
of $\Sc$ with itself. We work in intuitionistic Martin-LÃ¶f's type
theory with $\Sigma$-, $\Pi$- and $\mathrm{Id}$- types and with a
cumulative hierarchy of universes, simply written $\U$, for
which Voevodsky's univalence axiom hold. Moreover we introduce the
circle as a higher inductive type, meaning we postulate the existence
of a type $\Sc$ together with terms:
\begin{align}
  \label{eq:1}
  \base &: \Sc\\
  \Sloop &: \base =_{\Sc} \base
\end{align}
This type enjoys a inductive property: given a type family
$T : \Sc \to \U$, an element $t:T(\base)$ and a path
$p:t=_{T(\base)}t$, the $\Sc$-induction property provides a dependent
function $f : \prod_{x:\Sc}T(x)$ such that $f(\base) \jdeq t$ and an
element $q: f(\Sloop) = p$. In particular, $\Sc$-induction provides a
map
\begin{equation}
  \label{eq:2}
  \left(\sum_{t:T(\base)} \pathover t T \Sloop t\right) \to \prod_{x:\Sc}T(x)
\end{equation}
that is easily shown to be an equivalence (through $\Sc$-induction
again). In the case $T$ is the family constant in $A:\U$, it gives the
following universal property of the circle:
\begin{equation}
  \label{eq:3}
  \left(\sum_{t:A}t=t\right) \weq \left( \Sc \to A \right)
\end{equation}

Using univalence, one gets that $(\Sc = \Sc)$ is
equivalent to $(\Sc \weq \Sc)$ and we shall then concentrate on
proving
\begin{equation}
  (\Sc \weq \Sc) \weq (\Sc+\Sc)
\end{equation}
As usual, we shall denote $f:\Sc\weq\Sc$ for a map $f:\Sc\to \Sc $
such that the proposition $\isEq(f)$ is non-empty instead of the more
honest $(f,!):\Sc \weq \Sc$. 
This is harmless as the first projection is an equivalence
\begin{equation}
  ((f,!) =_{\Sc \weq \Sc} (g,!)) \simeq (f=_{\Sc \to \Sc}g).
\end{equation}

Recall that for each $x:\Sc$ one has an equivalence:
\begin{equation}
  \label{eq:8}
  f_x : (\base = \base) \to (x=x)
\end{equation}
Indeed, such a map $x\mapsto f_x$ is defined by $\Sc$-induction by
setting $f_{\base} \defequi \id$ and $f_{\Sloop}$ to be the proof that
postcomposing with the conjugation $\Sloop \blank \inv\Sloop$ is the
identity. In particular one can easily prove that
$f_x(\Sloop^k) = f_x(\Sloop)^k$ for any $k:\zet$. Now define $\iota_1$
and $\iota_2$ on each $x:\Sc$ as follows:
\begin{align*}
  \iota_1(x) (\base) &\defequi x & \iota_2(x) (\base) &\defequi x,
  \\
  \iota_1(x)(\Sloop) &\defis f_x(\Sloop) &  \iota_2(x)(\Sloop) &\defis f_x(\Sloop)^{-1}
\end{align*}
Each $\iota_j(x)$ ($j\in\{1,2\}$) is indeed an equivalence: $\Sc$
being connected, the proposition $\isEq(\iota_j(x))$ has to be proved
for only one point, say $\base$; but $\iota_1(\base)$ is equal to
$\id_\Sc$ (hence an equivalence) and $\iota_2(\base)$, that we call
$-\id_\Sc$ in the following, is its own pseudo inverse.

The maps $\iota_1$ and $\iota_2$ induce a maps
$\iota \defequi \langle\iota_1,\iota_2\rangle : \Sc + \Sc \to (\Sc\weq
\Sc)$.
\begin{theorem*}
  The map $\iota$ is an equivalence.
\end{theorem*}
%
Before proving the theorem, here is a lemma that already explains that
the two components of $\Sc+\Sc$ are mapped to distinct parts of
$(\Sc \weq \Sc)$.
\begin{lemma}
  \label{lemma:id-not-equal-oppid}%
  The type $(\id_\Sc = -\id_\Sc)$ is empty.
\end{lemma}
\begin{proof}
  By function extensionality and $\Sc$-induction, an element
  $p : \id_\Sc = -\id_\Sc$ is given by the data of
  $p(\base) : \id_\Sc(\base) = -\id_\Sc(base)$, that is
  $p(\base):\base=\base$, together with a pathover
  $p(\Sloop): \pathover {p(\base)} {} \Sloop {p(\base)}$ in the type
  family $x\mapsto \id_\Sc (x)=-\id_\Sc (x)$. The transport over
  $\Sloop$ in this type family is given by
  $\inv\Sloop\blank\inv\Sloop$, so that $p(\Sloop)$ is equivalently
  given by an element of $\inv\Sloop p(\base) \inv\Sloop =
  p(\base)$. By expliciting $p(\base)$ as $\Sloop^k$ for some
  $k:\zet$, the last equation becomes
  $\inv \Sloop \Sloop^k \inv \Sloop = \Sloop^k$, leading to the
  contradiction $2=0$ in $\zet$.
\end{proof}

\begin{proof}[Proof of the theorem]
  Take an element $\phi : \Sc \weq \Sc$ and consider the fiber of
  $\iota$ at $\phi$:
  \begin{equation}
    \label{eq:fiber-iota-two-components}%
    \inv\iota(\phi) \jdeq \sum_{x:\Sc+\Sc} \phi = \iota(x)
    \weq \left(\sum_{x:\Sc}\phi = \iota_1(x)\right) +
    \left(\sum_{x:\Sc}\phi = \iota_2(x)\right)
  \end{equation}
  One wants to prove the proposition $\iscontr(\inv\iota(\phi))$,
  hence one may assume a path $q:\phi(\base) = \base$ instead of
  merely $\Trunc{\phi(\base) = \base}$. By the description of the
  symmetries of $\base:\Sc$, there is $k:\zet$ such that
  $q\phi(\Sloop)\inv q = \Sloop^k$. Denoting $\psi$ for a pseudo
  inverse of the equivalence $\phi$, one also gets
  $q':\psi(\base) = \base$ and subsequently $\ell:\zet$ such that
  $q'\psi(\Sloop)\inv{q'} = \Sloop^\ell$. Doing some path algebra it
  follows that:
  \begin{equation}
    \label{eq:4}
    \psi(\phi(\Sloop)) = \inv{(q' \psi(q))}\Sloop^{\ell k} (q' \psi(q))
  \end{equation}
  By hypothesis, one has also $\tau : \prod_{x:\Sc}\psi\phi(x) = x$,
  so there is a pathover of type
  $\pathover {\tau(\base)} {} \Sloop {\tau(\base)}$ in the type family
  $x \mapsto \psi(\phi(x)) = x$. The transport over $\Sloop$ in this
  family is given by $\Sloop \blank \inv{(\psi\phi(\Sloop))}$, so that
  \begin{equation}
    \label{eq:5}
    \Sloop \tau(\base) \inv{(\psi\phi(\Sloop))} = \tau(\base)
  \end{equation}
  Putting equations~(\ref{eq:5}) and~(\ref{eq:4}) together, one find
  \begin{equation}
    \label{eq:6}
    \inv{(q' \psi(q) \inv{\tau(\base)})} \Sloop^{\ell k} (q' \psi(q) \inv{\tau(\base)}) = \Sloop
  \end{equation}
  However, conjugation in $\base = \base$ is equal to the identity, so
  that in the end $\Sloop^{\ell k} = \Sloop$, or otherwise put
  $\ell k = 1$ in $\zet$. Using the decidability of equality on
  $\zet$, one can show that the only invertible elements of $\zet$ are
  $1$ and $-1$. So $k = 1$ or $k = -1$. We proceed by case:
  \begin{enumerate}
  \item If $k=1$, then $Q \defequi (q, !)$ is element of
    $\phi = \id_\Sc$, where the term $!$ of the proposition
    $q=\Sloop q \inv{\phi(\Sloop)}$ is given by path algebra from the
    hypothesis $q\phi(\Sloop)\inv q=\Sloop^k$ ($k$ being $1$ here). We
    can then only show $\iscontr(\inv\iota(\id_\Sc))$ to conclude (by
    transport over $\inv Q$) that $\iscontr(\inv\iota(\phi))$. 

    One can immediately see that the second component of the right
    hand-side in equation~(\ref{eq:fiber-iota-two-components}) is
    empty when instantiated with $\id_\Sc$ for $\phi$: indeed,
    $\false$ being a proposition and $\Sc$ being connected, one only
    need to check that $\id_\Sc = \iota_2(\base)$ is contradictory;
    and because $\iota_2(\base) \jdeq -\id_\Sc$, it follows from
    lemma~\ref{lemma:id-not-equal-oppid}.

    Hence it remains to prove that $\sum_{x:\Sc}\id_\Sc=\iota_1(x)$ is
    contractible. For $x:\Sc$, the type $\id_\Sc = \iota_1(x)$ is
    equivalent (through first function extensionality and then
    $\Sc$-induction) to
    $\sum_{p:\base=\iota_1(x)(\base)}\pathover p T \Sloop p$ where $T$
    is the type family $y\mapsto y=\iota_1(x)(y)$. Now
    $\iota_1(x)(\base)\jdeq x$ and the transport over the loop
    $\Sloop$ in the type family $T$ is given by
    $\iota_1(x)(\Sloop) \blank \inv \Sloop$. In other words,
    \begin{equation}
      \label{eq:10}
      (\id_\Sc = \iota_1(x)) \weq \sum_{p:\base = x}f_x(\Sloop)p = p {\Sloop}
    \end{equation}
    By induction on $p:\base=x$, one can see that the proposition
    $f_x(\Sloop)p=p\Sloop$ is always satisfied. In the end, one has
    \begin{equation}
      \label{eq:11}
      \left(\sum_{x:\Sc}\id_\Sc=\iota_1(x)\right)
      \weq
      \left(\sum_{x:\Sc}\base=x\right)
    \end{equation}
    The type on the right is a singleton, hence contractible. This
    concludes the case $k=1$.
      \item The case $k=-1$ is completely similar to the case $k=1$. We
    now have a proof that $\phi = -\id_\Sc$, hence we shall prove that
    $\iscontr(\inv\iota(-\id_\Sc))$. From there one can determine that
    the first component of in (\ref{eq:fiber-iota-two-components}) is
    empty and concentrate on proving that
    $\sum_{x:\Sc}-\id_\Sc = \iota_2(x)$. The type
    $-\id_\Sc = \iota_2(x)$ is equivalent to
    $\sum_{p:\base = x}\inv{f_x(\Sloop)}p=p\inv\Sloop$ which is again
    equivalent to $\base=x$. We conclude the proof in the same way by
    recognizing a singleton.
  \end{enumerate}
\end{proof}

\section{The sphere}
\newcommand{\Sp}{S^2}%
\newcommand{\mrd}{\mathit{merid}}%
\newcommand{\susp}[1]{\operatorname{\Sigma}{#1}}%
%
We define the sphere $\Sp$ as the suspension $\susp\Sc$ of the circle.
The suspension $\susp A$ of a type $A$ is a higher inductive type 
with two point constructors and path constructors indexed by $A$:
\begin{align}
  \label{eq:suspension}
  N &: \susp A \quad\text{the `North pole'}\\
  S &: \susp A \quad\text{the `South pole'}\\
  \mrd &: A \to (N =_{\susp A} S) \quad\text{the `meridians'}
\end{align}
Suspensions enjoy a inductive property: given a type family
$T : \susp A \to \U$, elements $n:T(N)$ and $s:T(S)$, and paths
$m(a) : n=_{\mrd(a)}s$ for all $a:A$, 
suspension induction provides a dependent
function $f : \prod_{x:\susp A}T(x)$ such that $f(N) \jdeq n$, $f(S) \jdeq s$,
and paths $p_f(a): f(\mrd(a)) = m(a)$ for all $a:A$.

\subsection{Winding numbers}
\label{sec:winding-numbers}
\def\hopffam{\mathcal H}%
\def\loopspace#1{\operatorname{\Omega_{#1}}}%

The goal of this section is to provide for each map $\Sp \to \Sp$ a
{\em degree} in $\ZZ$. The first step is to a map
$\loopspace 2 \Sp \to \loopspace 1 \Sc$. The construction of such a
map in HoTT is known material that can be tracked back at least to Brunerie's
thesis. However, we are not only interested in the existence of such a
map or its defining properties but in its actual computation. We shall
then follow carefully the construction of the Hopf fibration provided
by Brunerie and keep track of the actual formula for the map of
interest.

Consider the type family $\hopffam : \Sp \to \U$ defined by induction
as follows:
\begin{equation}
  \label{eq:7}
  \begin{aligned}
    \hopffam (N) &\defequi \Sc
    \\
    \hopffam (S) &\defequi \Sc
    \\
    \hopffam (\mrd(x)) &\defis \iota_1(x) \quad\text{defined above}
  \end{aligned}
\end{equation}
Denote $X$ for the total space of the type family $\hopffam$. One can
show that $X$ is equivalent to the 3-sphere $\susp \Sp$, but this
shall not prove useful here. Hence we keep the neutral notation $X$ to
avoid confusion. The projection $\fst : X\to \Sp$ is referred as the
Hopf fibration in the literature and we should keep the naming in that
document.

If one equip $\Sc$ with the point $\base$, $\Sp$ with the point $N$
and $X$ with the point $(N,\base)$, then $\hopffam$ becomes a pointed
type family and the Hopf fibration a pointed map whose fiber at the
selected point $N$ is $\Sc$. In other words, one get a fiber sequence
as follows:
\begin{equation}
  \label{eq:9}
  \begin{tikzcd}
    \Sc \rar["i"] & X \rar["\fst"] & \Sp
  \end{tikzcd}
\end{equation}
The first map $i:\Sc \to X$ is simply the inclusion $z\mapsto
(N,z)$. This induces a fiber sequence at the level of loop spaces:
\begin{equation}
  \label{eq:12}
  \begin{tikzcd}
    \loopspace 1 \Sc \rar["\loopspace 1 i"] & \loopspace 1 X \rar["\loopspace 1 \fst"] & \loopspace 1 \Sp
  \end{tikzcd}
\end{equation}
Indeed, $\loopspace 1 \Sc$ identifies with the fiber of
$\loopspace 1 \fst$ through the following equivalences:
\begin{align}
  \inv {(\loopspace 1 \fst)} {(\refl N)}
  &\jdeq \sum_{(q,p):\loopspace 1 X}\refl N = (\loopspace 1 \fst)(q,p)
  \\
  &\weq \sum_{q:N=N}\sum_{p:\pathover \base {\hopffam} q \base}\refl N = q
  \\
  &\weq \sum_{q:N=N}(\refl N = q)\times(\trp{\hopffam, q}(\base) =\base)
  \\
  &\weq (\base = \base) \jdeq \loopspace 1 \Sc
\end{align}
Following the equivalence from $\loopspace 1 \Sc$ back to the fiber is
simply the function $p \mapsto ((\refl N,p),\refl{\refl N})$. Hence,
by postcomposing with the first projection, one gets
$p \mapsto (\refl N, p)$ which is indeed
$\loopspace 1 i: \loopspace 1 \Sc \to \loopspace 1 X$.

We are now interested in the fiber of $\loopspace 1 i$. Indeed,
\begin{align}
  \inv {(\loopspace 1 i)} {(\refl N,\refl\base)}
  &\weq \sum_{p:\base = \base}(\refl N,\refl\base) = (\refl N,p)
  \\
  &\weq \sum_{\alpha:\refl N = \refl N}\sum_{p:\base=\base}\trp {T,\alpha}(\refl \base)
 = p \label{eq:type-fam-trp}
  \\
  &\weq (\refl N = \refl N) \jdeq \loopspace 2 \Sp
\end{align}
where the type family $T:\loopspace 1 \Sp \to \U$ in
(\ref{eq:type-fam-trp}) is given by
$e\mapsto {(\pathover \base \hopffam e \base)}$. The equivalence from
$\loopspace 2 \Sp$ back to the actual fiber is given by:
\begin{equation}
  \begin{aligned}
    \loopspace 2 \Sp &\to \sum_{p:\base = \base}(\refl N,\refl\base) =
    (\refl N,p)
    \\
    \alpha &\mapsto \left(\trp{T,\alpha}(\refl\base), \left(\alpha,
        \refl{\trp{T,\alpha}(\refl\base)}\right)\right)
  \end{aligned}
\end{equation}
The map of interest is the composition of this equivalence with the
first projection to $\loopspace 1 \Sc$, which is then simply
$\alpha \mapsto \trp{T,\alpha}(\refl \base)$. All that remains to do
is to determine the transport in the type family $T$, so that one can
make explicit further the map $\loopspace 2 \Sp \to \loopspace 1 \Sc$
described above.

For any paths $e,e':N=N$ and a path $\alpha: e=e'$ between them, the
transport
$\trp{T,\alpha}:(\trp{H,e}(\base) = \base) \to (\trp{H,e'}(\base) =
\base)$ identifies with the following function:
\begin{equation}
  \begin{aligned}
    {t_\alpha}: (\trp{H,e}(\base) = \base) &\to (\trp{H,e'}(\base) = \base)
    \\
    p &\mapsto p\cdot \inv{\left(\ap{\trp{H,-}(\base)}(\alpha)\right)}
  \end{aligned}
\end{equation}
This is shown by induction on $\alpha$: indeed,
$\ap{\trp{H,-}(\base)}(\refl{e}) \jdeq \refl{\trp{H,e}(\base)}$; hence
path algebra provides a proof of $t_{\refl{e}}(p) = p$. So in
particular when $\alpha:\refl N = \refl N$, one gets
\begin{equation}\label{eq:trp-Ta(refl)}
  \trp{T,\alpha}(\refl \base) = \refl \base \cdot \inv{\left(\ap{\trp{H,-}(\base)}(\alpha)\right)}
  = \inv{\left(\ap{\trp{H,-}(\base)}(\alpha)\right)}
\end{equation}
A useful simplification is $\trp{H,\mrd(x)}(\base)=\iota_1(x)(\base)\jdeq x$.
This gives us 
\begin{equation}\label{eq:trp-Hmrd)}
\ap{\trp{H,-}(\base)}(\mrd(l)) = \ap{\trp{H,\mrd(\blank)}(\base)}(l) = l
\end{equation}
for any $l:z=z$.



\subsection{Symmetries of the sphere}
\label{sec:symmetries-sphere}

Four equivalences $\Sp\to\Sp$ that will be used in the sequel are
defined as follows. 
\begin{align}
  \label{eq:S2symmetries}
  e_0(x)&\jdeq x \quad\text{the identity equivalence}\\
\nonumber\\
  e_1(N)&\jdeq N \quad\text{keeping the poles}\\
  e_1(S)&\jdeq S\\
  e_1(\mrd(\base))&= \mrd(\base)\\
  e_1(\mrd(\Sloop))&= \mrd(\Sloop^{-1})\quad\text{reversing rotation of meridians}\\
\nonumber\\
  e_2(N)&\jdeq S \quad\text{flipping the poles}\\
  e_2(S)&\jdeq N\\
  e_2(\mrd(x))&= \mrd(x)^{-1}\quad\text{reversing the meridians}\\
\nonumber\\
  e_3(N)&\jdeq S \quad\text{flipping the poles}\\
  e_3(S)&\jdeq N\\
  e_3(\mrd(\base))&= \mrd(\base)^{-1}\quad\text{reversing the meridians, and}\\
  e_3(\mrd(\Sloop))&= \ap{\mrd(\_)^{-1}}(\Sloop^{-1})\quad\text{reversing their rotation}
\end{align}
One would expect $e_1=e_2$ and $e_0=e_3$ (??!) and both will turn out to be true.

In the sequel we will have to deal with the following situation.
Let $A$ be a type with elements $a, b, c : A$ and 1- and 2-paths as follows:
%
\begin{align*}
  p &: a = b       &       r &: b = c \\
  q &: a = b       &       s &: b = c \\
  \alpha &: p = q  &   \beta &: r = s
\end{align*}
%
We define the \emph{horizontal composition} of $\alpha$ and $\beta$ as 
a path $\beta\cdot_h\alpha: rp=sq$.
First observe that $\ap{r\_}(\alpha):rp=rq$.
Then observe that $\ap{\_q}(\beta):rq=sq$.
Now define $\beta\cdot_h\alpha \defeq \ap{\_q}(\beta)\ap{r\_}(\alpha)$,
the ordinary, \emph{vertical} composition of the previous two paths,
which indeed gives a path $rp=sq$. Horizontal composition enjoys many of
properties of ordinary composition, modulo some easy equivalences.
For example, in the situation above, if $\beta\jdeq\refl{r}$,
the type of $\alpha$ is $p=q$, whereas the type of $\refl{r}\cdot_h\alpha$
is $rp=rq$. However, by induction on $r$ one easily gets an equivalence
$e_r : (p=q) \to (rp=rq)$ and proves $e_r(\alpha)=\refl{r}\cdot_h\alpha$.
Similar equivalences can be constructed for associativity and other laws
of path algebra for horizontal composition. In order to stay well-typed
we mention the equivalences, but leave their construction to the reader.

We apply horizontal composition in the following situation:
%
\begin{align*}
  p &: a = b       &   p^{-1}       &: b=a           & q     &: a = b \\
  q &: a = b       &                &                & p     &: a = b \\
  \alpha &: p = q, &   \refl{p^{-1}}&: p^{-1}=p^{-1} & \beta &: q = p
\end{align*}
% 
In this situation, the composition $\alpha\beta$ has type $q=q$.
The horizontal composition $(\beta\cdot_h\refl{p^{-1}})\cdot_h\alpha$
has type $(qp^{-1})p = (p^{-1}p)q$. By induction on $p$ one constructs
an equivalence 
\[
e_p: (q=q)\to((qp^{-1})p = (p^{-1}p)q)
\]
such that (note the change of order) 
\[
e_p(\alpha\beta)=(\beta\cdot_h\refl{p^{-1}})\cdot_h\alpha.
\]
The latter equality is easily proved by induction on $\beta$.

\begin{lemma} We have $e_1 = e_2$ and $e_0 \neq e_2$.
\end{lemma}

\begin{proof}
We construct $f(x):T(x)\defeq(e_1(x)=e_2(x))$ for all $x:\Sp$ by 
suspension induction. We take $n\defeq\mrd(\base):(N=S)\jdeq T(N)$ and 
$s\defeq\mrd(\base)^{-1}:(S=N)\jdeq T(S)$. 
We have to give $m(z): n=^T_{\mrd(z)}s$
for all $z:\Sc$. The latter type is equivalent to
$P(z)\defeq(\mrd(z)^{-1}\cdot n\cdot e_1(\mrd(z))^{-1} = s)$.
We apply circle induction:
$m(\base): P(\base)$ can easily be given by path algebra,
as $P(\base)$ is equivalent to 
$\mrd(\base)^{-1}\cdot n\cdot\mrd(\base)^{-1} = s$.
It remains to give $m(\Sloop): m(\base)=^P_{\Sloop}m(\base)$.

Note first that $P$ is a identity type family with a function on the left
and a constant on the right. This means that transport in $P$ along $p$
is given by prefixing as follows:
\[
\trp{p}(q) = q \cdot (\mrd(\_)^{-1}\cdot n \cdot e_1(\mrd(\_))^{-1})(p)^{-1}.
\]
By induction on $p:\base=z$ one proves that (PICTURE!)
\[
(\mrd(\_)^{-1}\cdot n \cdot e_1(\mrd(\_))^{-1})(p) = 
\_\!\!^{-1}(\mrd(p)) \cdot_h \refl{n} \cdot_h\  \_\!\!^{-1}(e_1(\mrd(p))).
\]
Taking $p\jdeq{\Sloop}$ in the rhs gives
\[
\_\!^{-1}(\mrd(\Sloop)) \cdot_h \refl{n} \cdot_h\  \_\!^{-1}(\mrd(\Sloop^{-1})),
\]
which is the special case of the horizontal composition that can be futher
simplified to
\begin{align}
  \label{eq:trp-for-e1=e2}
e_{\mrd(\base)}(\_\!^{-1}(\mrd(\Sloop^{-1})) \cdot\_\!^{-1}(\mrd(\Sloop)) = 
e_{\mrd(\base)}(\_\!^{-1}(\refl{\mrd(\base)})).
\end{align}
The latter path is a reflexivity path, so that $\trp{\Sloop}$ actually is
homotopic to the identity function. Hence we can take for 
$m(\Sloop): m(\base)=^P_{\Sloop}m(\base)$ a simple transport of $\refl{m(\base)}$.

The second statement of the lemma, $(e_0 = e_2)\to\false$, is a proposition.
We have that $N=S$ is connected (as $\pi_1 \Sc$ is contractible),
and this will allow us to reuse a large part of the the proof of $e_1 = e_2$.
Assume we are given $f(x):R(x)\defeq(e_0(x)=e_2(x))$ for all $x:\Sp$.
We are to prove $\false$. Since  $N=S$ is connected, we can assume $f(N)=n\jdeq\mrd(\base):(N=S)\jdeq R(N)$ and 
$f(S)=s\jdeq\mrd(\base)^{-1}:(S=N)\jdeq R(S)$. 
We also have have $f(\mrd(z)): n=^R_{\mrd(z)}s$
for all $z:\Sc$. The latter type is equivalent to
$Q(z)\defeq(\mrd(z)^{-1}\cdot n\cdot \mrd(z)^{-1} = s)$.
Thus we get in particular $f'(\mrd(\base)): Q(\base)$ and 
$f'(\mrd(\Sloop)): f'(\mrd(\base))=^Q_{\Sloop}f'(\mrd(\base))$
for some transport $f'$ of $f$.
Transport in the family $Q$ goes like transport in $P$ with $e_1$
replaced by $e_0$, which is $\id$. 
This means that the rhs of Eq.\ref{eq:trp-for-e1=e2} becomes
$p_{02}\defeq e_{\mrd(\base)}(\_\!^{-1}(\mrd(\Sloop\cdot\Sloop)))$.
Transport in $Q$ is equivalent to precompostion with the inverse of $p_{02}$,
and hence $f'(\mrd(\Sloop)): f'(\mrd(\base))=^Q_{\Sloop}f'(\mrd(\base))$
leads to a contradiction if we show
$\mrd(\Sloop\cdot\Sloop) \neq \mrd(\refl{\base})$.
We do this in the next paragraph.

The following step was suggested by Nikolai Kraus.
Composing with $\mrd(\base)^{-1}$ is an equivalence
from $N=S$ to $N=N$. Applying this equivalence on paths gives an 
equivalence $e: \mrd(\base)=\mrd(\base)$ to $\refl{N}=\refl{N}$.
Assume $\mrd(\Sloop\cdot\Sloop) = \mrd(\refl{\base})$.
These are 2-paths of type $\mrd(\base)=\mrd(\base)$. ...


\end{proof}


%canonical equivalences $f_x : (\base=\base)\to(x=x)$ from (\ref{eq:8}).
\end{document}

% LocalWords: isomorphisms automorphisms morphisms
 
